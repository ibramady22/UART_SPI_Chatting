/**********************************************************************************************************************

 *  FILE DESCRIPTION
 *  -------------------------------------------------------------------------------------------------------------------
 *         File:  App.h
 *       Module:  Application layer
 *
 *  Description:  In this app , UART&SPI protocols used for chatting 
 *                the MCU will receive data by UART and send it by SPI
 *                the MCU will act here as MASTER and send data to another MCU(slave). 
 *  
 *********************************************************************************************************************/

/**********************************************************************************************************************
 *  INCLUDES
 *********************************************************************************************************************/
#include "App.h"



/**********************************************************************************************************************
 *  GLOBAL VARIABLES
 *********************************************************************************************************************/
static u8 WORD_RECEIVED[50]={'\n'};

/**********************************************************************************************************************
 *  STATIC FUNCTIONS
 *********************************************************************************************************************/



/**********************************************************************************************************************
 *  GLOBAL FUNCTIONS
 *********************************************************************************************************************/
void prepare_word(void)
{
	static u8 iter=0;
	static DIO_Pin_type led=PINA0;
	u8 loc_char;
	loc_char=UART_Receive_noBlock();
	if(loc_char!='#')
	{
		WORD_RECEIVED[iter]=loc_char;
		iter++;
	}
	else
	{
		DIO_WritePin(led,HIGH);
		led++;
		iter=0;
	}
}


void App_Init(void)
{
	/*initiate all used modules */
	DIO_Init();
	UART_Init();
	UART_TX_InterruptEnable();
	UART_RX_InterruptEnable();
	UART_RX_SetCallBack(&prepare_word);
	SPI_Init(MASTER);
}



void App_Runner(void)
{
	/* */
}


/**********************************************************************************************************************
 *  END OF FILE: FileName.c
 *********************************************************************************************************************/
